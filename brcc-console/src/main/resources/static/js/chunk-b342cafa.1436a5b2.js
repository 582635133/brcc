(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b342cafa"],{"02f4":function(t,e,n){var r=n("4588"),a=n("be13");t.exports=function(t){return function(e,n){var i,c,o=String(a(e)),s=r(n),u=o.length;return s<0||s>=u?t?"":void 0:(i=o.charCodeAt(s),i<55296||i>56319||s+1===u||(c=o.charCodeAt(s+1))<56320||c>57343?t?o.charAt(s):i:t?o.slice(s,s+2):c-56320+(i-55296<<10)+65536)}}},"0390":function(t,e,n){"use strict";var r=n("02f4")(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},"0bfb":function(t,e,n){"use strict";var r=n("cb7c");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"1af6":function(t,e,n){var r=n("63b6");r(r.S,"Array",{isArray:n("9003")})},"1e54":function(t,e,n){},"214f":function(t,e,n){"use strict";n("b0c5");var r=n("2aba"),a=n("32e9"),i=n("79e5"),c=n("be13"),o=n("2b4c"),s=n("520a"),u=o("species"),l=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var p=o(t),d=!i((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),h=d?!i((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[u]=function(){return n}),n[p](""),!e})):void 0;if(!d||!h||"replace"===t&&!l||"split"===t&&!f){var v=/./[p],b=n(c,p,""[t],(function(t,e,n,r,a){return e.exec===s?d&&!a?{done:!0,value:v.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),g=b[0],m=b[1];r(String.prototype,t,g),a(RegExp.prototype,p,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}}},"28a5":function(t,e,n){"use strict";var r=n("aae3"),a=n("cb7c"),i=n("ebd6"),c=n("0390"),o=n("9def"),s=n("5f1b"),u=n("520a"),l=n("79e5"),f=Math.min,p=[].push,d="split",h="length",v="lastIndex",b=4294967295,g=!l((function(){RegExp(b,"y")}));n("214f")("split",2,(function(t,e,n,l){var m;return m="c"=="abbc"[d](/(b)*/)[1]||4!="test"[d](/(?:)/,-1)[h]||2!="ab"[d](/(?:ab)*/)[h]||4!="."[d](/(.?)(.?)/)[h]||"."[d](/()()/)[h]>1||""[d](/.?/)[h]?function(t,e){var a=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(a,t,e);var i,c,o,s=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,d=void 0===e?b:e>>>0,g=new RegExp(t.source,l+"g");while(i=u.call(g,a)){if(c=g[v],c>f&&(s.push(a.slice(f,i.index)),i[h]>1&&i.index<a[h]&&p.apply(s,i.slice(1)),o=i[0][h],f=c,s[h]>=d))break;g[v]===i.index&&g[v]++}return f===a[h]?!o&&g.test("")||s.push(""):s.push(a.slice(f)),s[h]>d?s.slice(0,d):s}:"0"[d](void 0,0)[h]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var a=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,a,r):m.call(String(a),n,r)},function(t,e){var r=l(m,t,this,e,m!==n);if(r.done)return r.value;var u=a(t),p=String(this),d=i(u,RegExp),h=u.unicode,v=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(g?"y":"g"),y=new d(g?u:"^(?:"+u.source+")",v),x=void 0===e?b:e>>>0;if(0===x)return[];if(0===p.length)return null===s(y,p)?[p]:[];var j=0,k=0,w=[];while(k<p.length){y.lastIndex=g?k:0;var I,O=s(y,g?p:p.slice(k));if(null===O||(I=f(o(y.lastIndex+(g?0:k)),p.length))===j)k=c(p,k,h);else{if(w.push(p.slice(j,k)),w.length===x)return w;for(var D=1;D<=O.length-1;D++)if(w.push(O[D]),w.length===x)return w;k=j=I}}return w.push(p.slice(j)),w}]}))},"520a":function(t,e,n){"use strict";var r=n("0bfb"),a=RegExp.prototype.exec,i=String.prototype.replace,c=a,o="lastIndex",s=function(){var t=/a/,e=/b*/g;return a.call(t,"a"),a.call(e,"a"),0!==t[o]||0!==e[o]}(),u=void 0!==/()??/.exec("")[1],l=s||u;l&&(c=function(t){var e,n,c,l,f=this;return u&&(n=new RegExp("^"+f.source+"$(?!\\s)",r.call(f))),s&&(e=f[o]),c=a.call(f,t),s&&c&&(f[o]=f.global?c.index+c[0].length:e),u&&c&&c.length>1&&i.call(c[0],n,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(c[l]=void 0)})),c}),t.exports=c},"57e7":function(t,e,n){"use strict";var r=n("5ca1"),a=n("c366")(!1),i=[].indexOf,c=!!i&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(c||!n("2f21")(i)),"Array",{indexOf:function(t){return c?i.apply(this,arguments)||0:a(this,t,arguments[1])}})},"5f1b":function(t,e,n){"use strict";var r=n("23c6"),a=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var i=n.call(t,e);if("object"!==typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},"67bb":function(t,e,n){t.exports=n("f921")},"6d67":function(t,e,n){"use strict";var r=n("5ca1"),a=n("0a49")(1);r(r.P+r.F*!n("2f21")([].map,!0),"Array",{map:function(t){return a(this,t,arguments[1])}})},"75fc":function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n("a745"),a=n.n(r);function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t){if(a()(t))return i(t)}var o=n("774e"),s=n.n(o),u=n("c8bb"),l=n.n(u),f=n("67bb"),p=n.n(f);function d(t){if("undefined"!==typeof p.a&&l()(Object(t)))return s()(t)}function h(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?s()(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(t){return c(t)||d(t)||h(t)||v()}},"774e":function(t,e,n){t.exports=n("d2d5")},a745:function(t,e,n){t.exports=n("f410")},aae3:function(t,e,n){var r=n("d3f4"),a=n("2d95"),i=n("2b4c")("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==a(t))}},b0c5:function(t,e,n){"use strict";var r=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},c4a1:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-card",{attrs:{bordered:!1}},[n("section",{staticClass:"add-btn"},[n("a-breadcrumb",{staticClass:"title"},[n("a-breadcrumb-item",{staticClass:"font-menu"},[n("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.routerTo("/index")}}},[t._v("首页")])]),n("a-breadcrumb-item",[n("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.routerTo("/productLine")}}},[t._v(t._s(t.productName)+"-产品线")])]),n("a-breadcrumb-item",[n("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.routerTo("/listProject?productId="+t.productId)}}},[t._v(t._s(t.projectName)+"-工程")])]),n("a-breadcrumb-item",[n("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.routerTo("/listEnv?projectId="+t.projectId)}}},[t._v(t._s(t.environmentName)+"-环境")])]),n("a-breadcrumb-item",[n("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.routerTo("/listVersion?environmentId="+t.environmentId)}}},[t._v(t._s(t.versionName)+"-版本")])]),n("a-breadcrumb-item",[n("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.routerTo("/listConfigGroup?versionId="+t.versionId)}}},[t._v(t._s(t.groupName)+"-分组")])]),n("a-breadcrumb-item",[t._v("\n                配置项列表\n            ")])],1)],1),n("a-divider",{staticClass:"divider"}),n("section",{staticClass:"content"},[[n("a-tabs",{staticClass:"mt-10",attrs:{type:"card"}},[n("a-tab-pane",{key:"1",attrs:{tab:"逐条维护","default-active-key":""}},[[n("a-table",{attrs:{pagination:!1,loading:t.loading,columns:t.columns,"data-source":t.tableData,"row-key":function(t){return t.id}},scopedSlots:t._u([t._l(["name","val"],(function(e){return{key:e,fn:function(r,a,i){return[n("div",{key:e},[a.editable?n("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:r},on:{change:function(n){return t.handleChange(n.target.value,a.key,e,i)}}}):[n("span",{staticStyle:{"word-break":"break-all"}},[t._v(t._s(r))])]],2)]}}})),{key:"operation",fn:function(e,r,a){return[n("div",{staticClass:"editable-row-operations"},[r.editable?n("span",[n("a",{on:{click:function(){return t.save(r.key,a)}}},[t._v("保存")]),n("a-divider",{attrs:{type:"vertical"}}),n("a-popconfirm",{attrs:{title:"确认取消？","cancel-text":"取消","ok-text":"确认"},on:{confirm:function(){return t.cancel(r.key,a)}}},[n("a",[t._v("取消")])])],1):n("span",[t.canManage?n("a",{on:{click:function(){return t.edit(r.key,a)}}},[t._v("编辑")]):t._e(),n("a-divider",{attrs:{type:"vertical"}}),t.canManage?n("a-popconfirm",{attrs:{title:"确定要删除吗？"},on:{confirm:function(e){return t.handleDelete(r)}}},[n("a",{attrs:{href:"javascript:;",type:"primary"}},[t._v(" 删除 ")])]):t._e()],1)])]}}],null,!0)})],t.canManage?n("a-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary",block:"",icon:"plus"},on:{click:t.addNewData}},[t._v("新增配置")]):t._e()],2),n("a-tab-pane",{key:"2",attrs:{tab:"批量维护"}},[t.canManage?n("a-button",{staticClass:"fr mb-10",attrs:{type:"primary"},on:{click:function(e){return t.addList()}}},[t._v("保存修改")]):t._e(),[n("a-textarea",{attrs:{placeholder:"在此贴入配置项，每行一条"},model:{value:t.changeData,callback:function(e){t.changeData=e},expression:"changeData"}})]],2)],1)]],2)],1)},a=[],i=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("ac6a"),n("456d"),n("57e7"),n("28a5"),n("d25f"),n("75fc")),c=(n("7f7f"),n("96cf"),n("3b8d")),o=n("bd86");n("6d67");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l=[],f=[{title:"key",dataIndex:"name",width:"25%",scopedSlots:{customRender:"name"}},{title:"value",dataIndex:"val",width:"30%",scopedSlots:{customRender:"val"}},{title:"操作",dataIndex:"operation",width:"20%",align:"center",scopedSlots:{customRender:"operation"}}],p={data:function(){return this.cacheData=l.map((function(t){return u({},t)})),{itemData:[],changeData:"",columns:f,id:0,loading:!1,options:[],name:"",val:"",tableData:[],canManage:!1}},created:function(){this.getAllList()},methods:{getAllList:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.loading=!0,this.$api.config.getConfigList({groupId:this.$route.query.groupId}).then((function(t){n.loading=!1,n.tableData=t.data,n.canManage=t.ext.canManage,n.changeData="";for(var e=0;e<n.tableData.length;e++){var r=n.tableData[e];n.changeData+=r.name+"="+r.val+"\n"}})),e=JSON.parse(localStorage.getItem("rcc-info")),this.projectName=e.projectName,this.projectId=e.projectId,this.productName=e.productName,this.productId=e.productId,this.environmentId=e.environmentId,this.environmentName=e.environmentName,this.versionId=e.versionId,this.versionName=e.versionName,this.groupName=e.groupName,this.groupId=e.groupId;case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleDelete:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$api.config.deleteConfig(e.id).then((function(t){0===t.status?(n.$message.success("删除成功"),n.getAllList()):n.$message.error(t.msg)}));case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleChange:function(t,e,n,r){var a=Object(i["a"])(this.tableData),c=a.filter((function(t){return e===t.key}))[r];c&&(c[n]=t,this.tableData=a)},edit:function(t,e){var n=Object(i["a"])(this.tableData),r=n.filter((function(e){return t===e.key}))[e];r&&(r.editable=!0,this.tableData=n)},save:function(t,e){var n=this,r=Object(i["a"])(this.tableData),a=r.filter((function(e){return t===e.key}))[e];a&&(this.tableData=r,this.cacheData=r.map((function(t){return u({},t)}))),this.name=a.name,this.val=a.val,this.$api.config.addConfig({id:a.id,name:a.name,val:a.val,groupId:this.groupId,groupName:this.groupName,versionId:this.versionId,versionName:this.versionName,typeId:this.typeId}).then((function(t){0===t.status?(delete a.editable,n.$message.success("操作成功"),n.getAllList()):n.$message.error(t.msg)})).catch((function(t){n.$message.error(t.msg)}))},cancel:function(t,e){var n=Object(i["a"])(this.tableData),r=n.filter((function(e){return t===e.key}))[e];r&&(Object.assign(r,this.cacheData.filter((function(e){return t===e.key}))[e]),delete r.editable,this.tableData=n),this.getAllList()},addList:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this.changeData.split(/[\n]/g).filter((function(t){return t})),n=[],e.map((function(t,e){var r=t.indexOf("=");n[e]={name:t.substring(0,r),val:t.substring(r+1)}})),this.$api.config.batchConfig({groupId:this.groupId,items:n}).then((function(t){0===t.status?(r.$message.success("保存成功"),r.getAllList()):r.$message.error(t.msg)}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addNewData:function(){var t=this.tableData;this.tableData=[].concat(Object(i["a"])(t),[{id:0,name:"",val:"",typeId:"",editable:!0}])},routerTo:function(t){this.$router.push({path:t})}}},d=p,h=(n("ff8b"),n("2877")),v=Object(h["a"])(d,r,a,!1,null,"4db6fc70",null);e["default"]=v.exports},c8bb:function(t,e,n){t.exports=n("54a1")},f410:function(t,e,n){n("1af6"),t.exports=n("584a").Array.isArray},ff8b:function(t,e,n){"use strict";n("1e54")}}]);